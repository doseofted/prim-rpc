---
title: WebSocket
icon: simple-icons:javascript
type: "callback-plugin"
transport: "ws"
features: []
status: available
links:
  - name: WebSocket API
    href: https://developer.mozilla.org/en-US/docs/Web/API/WebSocket
---

import CodeFile from "@/components/Code/CodeFile.astro"

Prim+RPC can be used with the WebSocket API as implemented in all modern browsers. This plugin will allow Prim+RPC to
[communicate with a callback handler](/docs/reference/plugins#server-handlers) used with the Prim+RPC server.

We can set up a client like so:

<CodeFile filename="client/prim.ts">

```typescript
import { createPrimClient } from "@doseofted/prim-rpc"
import { createCallbackPlugin } from "@doseofted/prim-rpc-plugins/browser-websocket"
import type * as Module from "./module"

const callbackPlugin = createCallbackPlugin()
const client = createPrimClient<Module>({
  wsEndpoint: "ws://localhost:3000/prim"
  callbackPlugin
})
```

</CodeFile>

You may also use this plugin [alongside a method plugin](/docs/reference/plugins#client-plugins): Prim+RPC will know
when to use the callback plugin versus the method plugin.

If you are using the callback plugin alongside a method plugin, ensure that the WebSocket endpoint is correct as this
server may share the same port as your HTTP server. This will depend on how you choose to configure your WebSockets.
